<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>SHADY-STACK :: Overview</title>
  
  <link rel="index" title="Index" href="genindex.html"/>

  <link rel="stylesheet" href="_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/sphinx_highlight.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="#">SHADY-STACK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#what-is-shady-stack">What Is SHADY-STACK?</a></li>
<li><a class="reference internal" href="#what-is-this">What Is This?</a></li>
<li><a class="reference internal" href="#is-shady-stack-right-for-you">Is SHADY-STACK Right For You?</a></li>
<li><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
<li><a class="reference internal" href="#what-does-shady-stack-provide">What does SHADY-STACK Provide?</a></li>
<li><a class="reference internal" href="#install">Install</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shady-backend">Shady Backend</a><ul>
<li><a class="reference internal" href="#cli-args">CLI Args</a></li>
<li><a class="reference internal" href="#optional-args">Optional Args</a><ul>
<li><a class="reference internal" href="#the-default-api-demon-dad">The Default API Demon (DAD)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defining-apis">Defining APIs</a></li>
<li><a class="reference internal" href="#hooks">HOOKS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#default-bridges">Default Bridges</a><ul>
<li><a class="reference internal" href="#call-structure">Call Structure</a></li>
<li><a class="reference internal" href="#discord-bridge">Discord Bridge</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<p>Before we dive into the code, lets talk about the abstract concepts.</p>
<section id="what-is-shady-stack">
<h2>What Is SHADY-STACK?<a class="headerlink" href="#what-is-shady-stack" title="Permalink to this heading">¶</a></h2>
<p>As the name implies, this is a less than kosher web stack based of the SWAG
stack. I developed it for my projects as I am in university and web hosting can
be expensive. The shady stack consists of the following:</p>
<ol class="arabic simple">
<li><p>A <strong>S</strong> tatic site hosted (GitHub Pages, GitLab Pages, etc.)</p></li>
<li><p>Simplistic pages that communicate to the backend via a already existing web-app’s Web
<strong>H</strong> ooks (Slack, Discord, Gsuit, GitHub Actions, etc.).</p></li>
<li><p>An <strong>A</strong> plication Bridge program that can read the calls to the webhooks and
pass them to the next component.</p></li>
<li><p>A Backend <strong>D</strong> eamon that acutely presses the requests from the webhooks and
updates a local copy of the site tree as needed.</p></li>
<li><p>An application that regularly s <strong>Y</strong> ncs the local tree
with the remote tree served as the static site in step 1.</p></li>
</ol>
</section>
<section id="what-is-this">
<h2>What Is This?<a class="headerlink" href="#what-is-this" title="Permalink to this heading">¶</a></h2>
<p>In this webpage you will find the documentation for using the SHADY-STACK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This sample documentation was generated on Mar 12, 2023, and is rebuilt with
each release.</p>
</div>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="is-shady-stack-right-for-you">
<h2>Is SHADY-STACK Right For You?<a class="headerlink" href="#is-shady-stack-right-for-you" title="Permalink to this heading">¶</a></h2>
<p>There are some ups and downs to using this stack.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pros</p></th>
<th class="head"><p>Cons</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Backend is hidden behind a
proxy of sorts.</p></td>
<td><p>Failure or delay in the webhook
provider means failure/delay
in your site.</p></td>
</tr>
<tr class="row-odd"><td><p>It’s free!</p></td>
<td><p>Depending on the web hook
provider, it may be breaking a
TOS or two.</p></td>
</tr>
<tr class="row-even"><td><p>It’s kinda fail-safe.
If the backend breaks,
the static parts of your
site will still work.</p></td>
<td><p>The number of components between
your frontend and backend means
it’s slow to update.</p></td>
</tr>
</tbody>
</table>
<p>Remember to consult your physician to see if SHADY-STACK is right for you.</p>
</section>
<section id="design-philosophy">
<h2>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Permalink to this heading">¶</a></h2>
<p>With the above in mind. The code for this project will follow these goals:</p>
<ol class="arabic simple">
<li><p>Secure defaults - It may be shady, but let’s still not get pwned…</p></li>
<li><p>Dead simple to set up - When using shady, time from project design to
working product so be as fast as possible.</p></li>
<li><p>Minimize the amount of JS needed in a project - I hate writing it.</p></li>
</ol>
<p>(These are mostly for me to keep in mind while developing.)</p>
</section>
<section id="what-does-shady-stack-provide">
<h2>What does SHADY-STACK Provide?<a class="headerlink" href="#what-does-shady-stack-provide" title="Permalink to this heading">¶</a></h2>
<p>You may be asking yourself, what tooling exists for this SHADY-STACK? Well,
while anyone is invited to build on these concepts, the SHADY-STACK <a class="reference external" href="https://github.com/user-1103/shady-stack">repo</a>
provides the following:</p>
<ul class="simple">
<li><p>Bridge Applications For:</p>
<ul>
<li><p>Discord</p></li>
</ul>
</li>
<li><p>A Default API Demon</p></li>
<li><p>Default Hooks For Syncing Via Git</p></li>
</ul>
<p>Each of these parts are explained in their respective sections.</p>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this heading">¶</a></h2>
<p>The resources provided by the SHADY-STACK <a class="reference external" href="https://github.com/user-1103/shady-stack">repo</a> are in the form of a python
model of the name <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code>.</p>
<p>Currently the default demon and a specified bridge
can be run as a <a class="reference external" href="https://nixos.org/">nix</a> flake with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nix</span> <span class="n">run</span> <span class="n">github</span><span class="p">:</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span> <span class="o">-</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
<span class="c1"># To enter a development environment use:</span>
<span class="n">nix</span> <span class="n">develop</span> <span class="n">github</span><span class="p">:</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
</pre></div>
</div>
<p>For thoes of you who have yet to see the glory of <a class="reference external" href="https://nixos.org/">nix</a> the package can be
installed as a <a class="reference external" href="https://python-poetry.org/docs/">poetry</a> project.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clone the repo.</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
<span class="c1"># Enter the repo:</span>
<span class="n">cd</span> <span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
<span class="c1"># Install with poetry_</span>
<span class="n">poetry</span> <span class="n">install</span>
<span class="c1"># Run the backend components</span>
<span class="n">shadybackend</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you have something against <a class="reference external" href="https://python-poetry.org/docs/">poetry</a>, you can install the dependencies your
self (found in pyproject.toml). And run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">top_level</span><span class="o">.</span><span class="n">py</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Need to set up a pip package…</p>
</div>
</section>
</section>
<section id="shady-backend">
<h1>Shady Backend<a class="headerlink" href="#shady-backend" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code> python module is it the collection of resources provided
by the repo. The <a class="reference internal" href="#install">Install</a> section outlines how to install and run the module
from the command line, subseqently allowing for acess to all the parts provided
by the repo. To progamiticly use the module, see <a href="#id4"><span class="problematic" id="id5">`Progmatic Use`_</span></a>.</p>
<section id="cli-args">
<h2>CLI Args<a class="headerlink" href="#cli-args" title="Permalink to this heading">¶</a></h2>
<p>No matter how you call shady, the following is roughly how it will be used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">command</span> <span class="n">to</span> <span class="n">call</span> <span class="n">shady</span><span class="o">&gt;</span> <span class="s1">&#39;&lt;name of bridge&gt;&#39;</span> <span class="s1">&#39;&lt;JSON describing the initial G value&gt;&#39;</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#default-bridges">default bridges</a> and <a href="#id6"><span class="problematic" id="id7">`G`_</span></a> for more info.</p>
</section>
<section id="optional-args">
<h2>Optional Args<a class="headerlink" href="#optional-args" title="Permalink to this heading">¶</a></h2>
<p>Additionally, one may use the following:</p>
<dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--verbose</span></kbd></dt>
<dd><p>Be chatty.</p>
</dd>
<dt><kbd><span class="option">--tree <var>TREE</var></span></kbd></dt>
<dd><p>Provide the location of the web root.</p>
</dd>
<dt><kbd><span class="option">--api <var>API</var></span></kbd></dt>
<dd><p>Provide the location of the api.py file.</p>
</dd>
</dl>
<section id="the-default-api-demon-dad">
<h3>The Default API Demon (DAD)<a class="headerlink" href="#the-default-api-demon-dad" title="Permalink to this heading">¶</a></h3>
<p>DAD is an extremely bare bones Application Demon. When <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code> is run,
it will be started. When run, DAD first looks for user defined APIs to load in
from <code class="docutils literal notranslate"><span class="pre">api.py</span></code> in the curent directory.</p>
</section>
</section>
<section id="defining-apis">
<h2>Defining APIs<a class="headerlink" href="#defining-apis" title="Permalink to this heading">¶</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">api.py</span></code> file is a normal python file where you can define how your api.</p>
<p>Take the sample below:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">api.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">shadybackend.api_tools</span> <span class="kn">import</span> <span class="n">define_api</span>

<span class="nd">@define_api</span><span class="p">({</span><span class="s2">&quot;example_arg&quot;</span><span class="p">:</span> <span class="s2">&quot;default_value&quot;</span><span class="p">,</span> <span class="s2">&quot;required_arg_&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">example_api</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">ARGS</span><span class="p">):</span>
    <span class="o">...</span> <span class="c1"># Do some api stuff</span>
</pre></div>
</div>
</div>
<p>Lets break down these lines one at a time:</p>
<ol class="arabic simple">
<li><p>Here we import the <a class="reference external" href="https://www.geeksforgeeks.org/function-wrappers-in-python/">wraper</a> function for defining an api call.</p></li>
<li><p>A little space to breath.</p></li>
<li><p>We use the wrapper to define the <a href="#id8"><span class="problematic" id="id9">`baseline arguments`_</span></a> for the api.</p></li>
<li><p>We declare a function that will do the actual backend processing of
the api. The name of the api call is determined by the name of the function
and is passed <a href="#id10"><span class="problematic" id="id11">G_</span></a>, and <a href="#id12"><span class="problematic" id="id13">ARGS_</span></a>.</p></li>
</ol>
<p>API baselines are one of the defualt security fetures of SHADY-STACK. The
basline for an api exists as a dictionary keyed by strings representing the
name of the argument. The values represent the default values for the argument
if none is provided when the api is called. Before the api funciton is called,
the types of each suplied argument will be compaired to the type of the defualt
value. If they do not match, the api will not be called. If the name of an
arument ends with a <code class="docutils literal notranslate"><span class="pre">_</span></code>, it will be marked as required. If a required arg is
missing when an api call is requested, the api will not be called. All aruments
provided that are not found in the baseline will be silenty dropped before
being called. Internaly the default <a class="reference external" href="https://docs.python.org/3/library/json.html">JSON</a> lib is used and as such, only types
parsed by it can be used in the baseline.</p>
<p>When an api is called, it has acess to a global dictionary named <code class="docutils literal notranslate"><span class="pre">G</span></code> al la <a class="reference external" href="https://flask.palletsprojects.com/en/2.2.x/">flask</a>.
The data in this variable is shared across all api calls, <a class="reference internal" href="#hooks">hooks</a>, and Application Bridges.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A feature that is being concidered is to save the state of <code class="docutils literal notranslate"><span class="pre">G</span></code> across runs of the backend.
For now though, the state is purged on shutdown.</p>
</div>
<p>By default, DAD sets the folowing <a href="#id14"><span class="problematic" id="id15">G_</span></a> variables:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>root</p></td>
<td><p>The path to the location of the local web root.</p></td>
</tr>
<tr class="row-odd"><td><p>run</p></td>
<td><p>Can be set to false to shutdown the demon.</p></td>
</tr>
<tr class="row-even"><td><p>Q</p></td>
<td><p>The queue of Request objects to process.</p></td>
</tr>
<tr class="row-odd"><td><p>req</p></td>
<td><p>The curent request being processed. Usefull for
error handeling.</p></td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#default-bridges">Default bridges</a> may define further values.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is probably best to not touch <code class="docutils literal notranslate"><span class="pre">Q</span></code> or <code class="docutils literal notranslate"><span class="pre">req</span></code> unless you know what you are doing.
The Requests stored in these variables are not sanitized.</p>
</div>
<p>After the above parsing is done to the aruments provided to the webhook, they
are then provided to the API funciton via the <a href="#id16"><span class="problematic" id="id17">ARGS_</span></a> variable.</p>
</section>
<section id="hooks">
<h2>HOOKS<a class="headerlink" href="#hooks" title="Permalink to this heading">¶</a></h2>
<p>DAD provides a way to ensure certian actions happen when ceritan events happen
during the execution of DAD. Take the following adition to our <code class="docutils literal notranslate"><span class="pre">api.py</span></code> file:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">api.py</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">shadybackend.api_tools</span> <span class="kn">import</span> <span class="n">define_api</span><span class="p">,</span> <span class="n">define_hook</span><span class="p">,</span> <span class="n">HookTypes</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="nd">@define_api</span><span class="p">({</span><span class="s2">&quot;example_arg&quot;</span><span class="p">:</span> <span class="s2">&quot;default_value&quot;</span><span class="p">,</span> <span class="s2">&quot;required_arg_&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">example_api</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">ARGS</span><span class="p">):</span>
    <span class="o">...</span> <span class="c1"># Do some api stuff</span>

<span class="nd">@define_hook</span><span class="p">(</span><span class="n">HookTypes</span><span class="o">.</span><span class="n">ERR</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log_error</span><span class="p">(</span><span class="n">G</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;error.log&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to process request @</span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This trivial example writes a log file everytime DAD fails to process a
request. The available events you can hook are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Runs On…</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HookTypes.ERR</p></td>
<td><p>…a failure in processing a request.</p></td>
</tr>
<tr class="row-odd"><td><p>HookTypes.INIT</p></td>
<td><p>…demon startup.</p></td>
</tr>
<tr class="row-even"><td><p>HookTypes.PRE</p></td>
<td><p>…the start of processing a request</p></td>
</tr>
<tr class="row-odd"><td><p>HookTypes.OK</p></td>
<td><p>…the successful processing of a request</p></td>
</tr>
<tr class="row-even"><td><p>HookTypes.POST</p></td>
<td><p>…the end of the processing of a request</p></td>
</tr>
<tr class="row-odd"><td><p>HookTypes.EXIT</p></td>
<td><p>…demon safe exit.</p></td>
</tr>
<tr class="row-even"><td><p>HookTypes.FATAL</p></td>
<td><p>…demon hitting an unsaveable error.</p></td>
</tr>
<tr class="row-odd"><td><p>HookTypes.WAIT</p></td>
<td><p>…demon idle.</p></td>
</tr>
</tbody>
</table>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">OK</span></code> hook to sync your local copy of the site to the
remote static site.</p>
</div>
</section>
</section>
<section id="default-bridges">
<h1>Default Bridges<a class="headerlink" href="#default-bridges" title="Permalink to this heading">¶</a></h1>
<p>The SHADY-STACK <a class="reference external" href="https://github.com/user-1103/shady-stack">repo</a> provides a bunch of defualt bridges that can be activated
with DAD.</p>
<section id="call-structure">
<h2>Call Structure<a class="headerlink" href="#call-structure" title="Permalink to this heading">¶</a></h2>
<p>When the user using the static front end of your site needs to do something
dynamic, the JS in the page should call the webhook watched by the Application
Bridge. In this call two things need to be passed the name of the api call to
use, and the aruments to pass to the api call. The bridges defined in the repo
expects the folowing data feilds as a minimum:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>api_call</p></td>
<td><p>The name of the api to use for the request.</p></td>
</tr>
<tr class="row-odd"><td><p>data</p></td>
<td><p>A dictionary of args to pass to the request.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="discord-bridge">
<h2>Discord Bridge<a class="headerlink" href="#discord-bridge" title="Permalink to this heading">¶</a></h2>
<p>The discord bridge can be used by requesting the <code class="docutils literal notranslate"><span class="pre">discord</span></code> from DAD. First
though, you need to setup a <a class="reference external" href="https://support.discord.com/hc/en-us/articles/204849977-How-do-I-create-a-server-">new discord server</a>, a <a class="reference external" href="https://support.discord.com/hc/en-us/articles/360045093012-Server-Integrations-Page">webhook</a> for that server
(save this for latter), and then <a class="reference external" href="https://discordpy.readthedocs.io/en/stable/discord.html">register a new bot</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As of the most recent discord API update, you will need to give your bot the
<a class="reference external" href="https://discord.com/developers/docs/topics/gateway#message-content-intent">message content intent</a> for shady to work.</p>
</div>
<p>When you register a new bot, you will get a token that will allow the discord
bridge to act as your newly created bot. You will need to pass this token
through the G variable like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">shadybackend</span> <span class="s2">&quot;discord&quot;</span> <span class="s1">&#39;{&quot;discord_token&quot;: &quot;&lt;bot token&gt;&quot;}&#39;</span>
</pre></div>
</div>
<p>This tells shady backend to start DAD with the discord bridge, and to connect
to the bot token provided. You can test your webhook with the folowing commands:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">test_hook.sh</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">WEBHOOK_URL</span><span class="o">=</span><span class="s2">&quot;&lt;your web hook url&gt;&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SHADY_MSG</span><span class="o">=</span><span class="s1">&#39;{&quot;api_call&quot;:&quot;example_api_call&quot;,&quot;data&quot;:{&quot;example_arg&quot;:&quot;foobar&quot;}}&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">WEBHOOK_MSG</span><span class="o">=</span><span class="s2">&quot;{\&quot;username\&quot;: \&quot;test\&quot;, \&quot;content\&quot;: \&quot;</span><span class="nv">$SHADY_MSG</span><span class="s2">\&quot;}&quot;</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="nv">$WEBHOOK_MSG</span><span class="w"> </span><span class="nv">$WEBHOOK_URL</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note how the shady <a class="reference internal" href="#call-structure">Call Structure</a> is wrapped by the the discord call structure.</p>
</div>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="_sources/index.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>

        
            <div id="copyright">
                &copy; 2023, User 1103
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>