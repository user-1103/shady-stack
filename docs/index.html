<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>SHADY-STACK :: Welcome to SHADY-STACK</title>
  
  <link rel="index" title="Index" href="genindex.html"/>

  <link rel="stylesheet" href="_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/sphinx_highlight.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="#">SHADY-STACK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to SHADY-STACK</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#what-is-shady-stack">What Is SHADY-STACK?</a></li>
<li><a class="reference internal" href="#what-is-this">What Is This?</a></li>
<li><a class="reference internal" href="#is-shady-stack-right-for-you">Is SHADY-STACK Right For You?</a></li>
<li><a class="reference internal" href="#design-philosophy">Design Philosophy</a></li>
<li><a class="reference internal" href="#what-does-shady-stack-provide">What does SHADY-STACK Provide?</a></li>
<li><a class="reference internal" href="#install">Install</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shady-backend">Shady Backend</a></li>
<li><a class="reference internal" href="#the-default-api-demon-dad">The Default API Demon (DAD)</a><ul>
<li><a class="reference internal" href="#defining-apis">Defining APIs</a><ul>
<li><a class="reference internal" href="#baseline-arguments">Baseline Arguments</a></li>
<li><a class="reference internal" href="#g">G</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>
</div>
  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="welcome-to-shady-stack">
<h1>Welcome to SHADY-STACK<a class="headerlink" href="#welcome-to-shady-stack" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Before we dive into the code, lets talk about the abstract concepts.</p>
<section id="what-is-shady-stack">
<h3>What Is SHADY-STACK?<a class="headerlink" href="#what-is-shady-stack" title="Permalink to this heading">¶</a></h3>
<p>As the name implies, this is a less than kosher web stack based of the SWAG
stack. I developed it for my projects as I am in university and web hosting can
be expensive. The shady stack consists of the following:</p>
<ol class="arabic simple">
<li><p>A <strong>S</strong> tatic site hosted (GitHub Pages, GitLab Pages, etc.)</p></li>
<li><p>Simplistic pages that communicate to the backend via a already existing web-app’s Web
<strong>H</strong> ooks (Slack, Discord, Gsuit, GitHub Actions, etc.).</p></li>
<li><p>An <strong>A</strong> plication Bridge program that can read the calls to the webhooks and
pass them to the next component.</p></li>
<li><p>A Backend <strong>D</strong> eamon that acutely presses the requests from the webhooks and
updates a local copy of the site tree as needed.</p></li>
<li><p>An application that regularly s <strong>Y</strong> ncs the local tree
with the remote tree served as the static site in step 1.</p></li>
</ol>
</section>
<section id="what-is-this">
<h3>What Is This?<a class="headerlink" href="#what-is-this" title="Permalink to this heading">¶</a></h3>
<p>In this webpage you will find the documentation for using the SHADY-STACK.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This sample documentation was generated on Mar 09, 2023, and is rebuilt with
each release.</p>
</div>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="is-shady-stack-right-for-you">
<h3>Is SHADY-STACK Right For You?<a class="headerlink" href="#is-shady-stack-right-for-you" title="Permalink to this heading">¶</a></h3>
<p>There are some ups and downs to using this stack.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Pros</p></th>
<th class="head"><p>Cons</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Backend is hidden behind a
proxy of sorts.</p></td>
<td><p>Failure or delay in the webhook
provider means failure/delay
in your site.</p></td>
</tr>
<tr class="row-odd"><td><p>It’s free!</p></td>
<td><p>Depending on the web hook
provider, it may be breaking a
TOS or two.</p></td>
</tr>
<tr class="row-even"><td><p>It’s kinda fail-safe.
If the backend breaks,
the static parts of your
site will still work.</p></td>
<td><p>The number of components between
your frontend and backend means
it’s slow to update.</p></td>
</tr>
</tbody>
</table>
<p>Remember to consult your physician to see if SHADY-STACK is right for you.</p>
</section>
<section id="design-philosophy">
<h3>Design Philosophy<a class="headerlink" href="#design-philosophy" title="Permalink to this heading">¶</a></h3>
<p>With the above in mind. The code for this project will follow these goals:</p>
<ol class="arabic simple">
<li><p>Secure defaults - It may be shady, but let’s still not get pwned…</p></li>
<li><p>Dead simple to set up - When using shady, time from project design to
working product so be as fast as possible.</p></li>
<li><p>Minimize the amount of JS needed in a project - I hate writing it.</p></li>
</ol>
<p>(These are mostly for me to keep in mind while developing.)</p>
</section>
<section id="what-does-shady-stack-provide">
<h3>What does SHADY-STACK Provide?<a class="headerlink" href="#what-does-shady-stack-provide" title="Permalink to this heading">¶</a></h3>
<p>You may be asking yourself, what tooling exists for this SHADY-STACK? Well,
while anyone is invited to build on these concepts, the SHADY-STACK <a class="reference external" href="https://github.com/user-1103/shady-stack">repo</a>
provides the following:</p>
<ul class="simple">
<li><p>Bridge Applications For:</p>
<ul>
<li><p>Discord</p></li>
</ul>
</li>
<li><p>A Default API Demon</p></li>
<li><p>Default Hooks For Syncing Via Git</p></li>
</ul>
<p>Each of these parts are explained in their respective sections.</p>
</section>
<section id="install">
<h3>Install<a class="headerlink" href="#install" title="Permalink to this heading">¶</a></h3>
<p>The resources provided by the SHADY-STACK <a class="reference external" href="https://github.com/user-1103/shady-stack">repo</a> are in the form of a python
model of the name <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code>.</p>
<p>Currently the default demon and a specified bridge
can be run as a <a class="reference external" href="https://nixos.org/">nix</a> flake with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nix</span> <span class="n">run</span> <span class="n">github</span><span class="p">:</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span> <span class="o">-</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
<span class="c1"># To enter a development environment use:</span>
<span class="n">nix</span> <span class="n">develop</span> <span class="n">github</span><span class="p">:</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
</pre></div>
</div>
<p>For thoes of you who have yet to see the glory of <a class="reference external" href="https://nixos.org/">nix</a> the package can be
installed as a <a class="reference external" href="https://python-poetry.org/docs/">poetry</a> project.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clone the repo.</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">user</span><span class="o">-</span><span class="mi">1103</span><span class="o">/</span><span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
<span class="c1"># Enter the repo:</span>
<span class="n">cd</span> <span class="n">shady</span><span class="o">-</span><span class="n">stack</span>
<span class="c1"># Install with poetry_</span>
<span class="n">poetry</span> <span class="n">install</span>
<span class="c1"># Run the backend components</span>
<span class="n">shadybackend</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you have something against <a class="reference external" href="https://python-poetry.org/docs/">poetry</a>, you can install the dependencies your
self (found in pyproject.toml). And run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">top_level</span><span class="o">.</span><span class="n">py</span> <span class="o">&lt;</span><span class="n">args</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Need to set up a pip package…</p>
</div>
</section>
</section>
<section id="shady-backend">
<h2>Shady Backend<a class="headerlink" href="#shady-backend" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code> python module is it the collection of resources provided
by the repo. The <a class="reference internal" href="#install">Install</a> section outlines how to install and run the module
from the command line, subseqently allowing for acess to all the parts provided
by the repo. To progamiticly use the module, see <a href="#id2"><span class="problematic" id="id3">`Progmatic Use`_</span></a>.</p>
</section>
<section id="the-default-api-demon-dad">
<h2>The Default API Demon (DAD)<a class="headerlink" href="#the-default-api-demon-dad" title="Permalink to this heading">¶</a></h2>
<p>DAD is an extremely bare bones Application Demon. When <code class="docutils literal notranslate"><span class="pre">shadybackend</span></code> is run,
it will be started. When run, DAD first looks for user defined APIs to load in
from <code class="docutils literal notranslate"><span class="pre">api.py</span></code> in the curent directory.</p>
<section id="defining-apis">
<h3>Defining APIs<a class="headerlink" href="#defining-apis" title="Permalink to this heading">¶</a></h3>
<p>An <code class="docutils literal notranslate"><span class="pre">api.py</span></code> file is a normal python file where you can define how your api.</p>
<p>Take the sample below:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">api.py</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">shadybackend.api_tools</span> <span class="kn">import</span> <span class="n">define_api</span>

<span class="nd">@define_api</span><span class="p">({</span><span class="s2">&quot;example_arg&quot;</span><span class="p">:</span> <span class="s2">&quot;default_value&quot;</span><span class="p">,</span> <span class="s2">&quot;required_arg_&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">example_api</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">ARGS</span><span class="p">):</span>
    <span class="o">...</span> <span class="c1"># Do some api stuff</span>
</pre></div>
</div>
</div>
<p>Lets break down these lines one at a time:</p>
<ol class="arabic simple">
<li><p>Here we import the <a href="#id4"><span class="problematic" id="id5">wraper_</span></a> function for defining an api call.</p></li>
<li><p>A little space to breath.</p></li>
<li><p>We use the wrapper to define the ‘baseline arguments`_ for the api.</p></li>
<li><p>We declare a function that will do the actual backend processing of
the api. The name of the api call is determined by the name of the function
and is passed <a class="reference internal" href="#g">G</a>, and <a href="#id6"><span class="problematic" id="id7">ARGS_</span></a>.</p></li>
</ol>
<section id="baseline-arguments">
<h4>Baseline Arguments<a class="headerlink" href="#baseline-arguments" title="Permalink to this heading">¶</a></h4>
<p>API baselines are one of the defualt security fetures of SHADY-STACK. The
basline for an api exists as a dictionary keyed by strings representing the
name of the argument. The values represent the default values for the argument
if none is provided when the api is called. Before the api funciton is called,
the types of each suplied argument will be compaired to the type of the defualt
value. If they do not match, the api will not be called. If the name of an
arument ends with a <code class="docutils literal notranslate"><span class="pre">_</span></code>, it will be marked as required. If a required arg is
missing when an api call is requested, the api will not be called. All aruments
provided that are not found in the baseline will be silenty dropped before
being called. Internaly the default <a href="#id8"><span class="problematic" id="id9">JSON_</span></a> lib is used and as such, only types
parsed by it can be used in the baseline.</p>
</section>
<section id="g">
<h4>G<a class="headerlink" href="#g" title="Permalink to this heading">¶</a></h4>
<p>When an api is called, it has acess to a global dictionary named <code class="docutils literal notranslate"><span class="pre">G</span></code> al la <a href="#id10"><span class="problematic" id="id11">flask_</span></a>.
The data in this variable is shared across all api calls.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A feature that is being concidered is to save the state of <code class="docutils literal notranslate"><span class="pre">G</span></code> across runs of the backend.
For now though, the state is purged on shutdown.</p>
</div>
<p>When the user using the static front end of your site needs to do something
dynamic, the JS in the page should call the webhook watched by the Application
Bridge. In this call two things need to be passed the name of the api call to
use, and the aruments to pass to the api call.</p>
</section>
</section>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="_sources/index.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>

        
            <div id="copyright">
                &copy; 2023, User 1103
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>